function updateSuggestionPosition(){const t=300;document.getElementById("local-suggestions").style.bottom=`${t}px`}document.addEventListener("DOMContentLoaded",function(){function t(t){if(i(),!t.trim())return;fetch("https://raw.githubusercontent.com/adam-abed-abud/arabic-words-list/main/arabic-words.txt").then(t=>t.text()).then(e=>{const n=e.split("\n"),o=new RegExp(`^${t}`,"i"),c=n.filter(t=>o.test(t));if(u.style.display="block",0===c.length){const t=document.createElement("div");return t.textContent="No local suggestions",void u.appendChild(t)}c.slice(0,10).forEach(function(e){const n=document.createElement("div");n.innerHTML=`<strong>${e.substr(0,t.length)}</strong>${e.substr(t.length)}`,n.addEventListener("click",function(){s.value=e,i()}),u.appendChild(n)})})["catch"](t=>console.error("Error:",t))}function e(t){if(!t.trim())return void i();const e=`https://ar.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${encodeURIComponent(t)}&limit=10&namespace=0&format=json`;fetch(e).then(t=>t.json()).then(e=>{const n=e[1],o=e[3];g.style.display="block";const c=document.createElement("h2");if(c.textContent="Wikipedia",g.appendChild(c),0===n.length){const t=document.createElement("div");return t.textContent="No Wikipedia suggestions",void g.appendChild(t)}n.forEach(function(e,n){const c=document.createElement("div");c.innerHTML=`<strong>${e.substr(0,t.length)}</strong>${e.substr(t.length)}`;const a=document.createElement("a");a.href=o[n],a.textContent=" [wiki]",a.target="_blank",c.appendChild(a),c.addEventListener("click",function(t){t.target!==a&&(s.value=e,i())}),g.appendChild(c)})})["catch"](t=>{console.error("Error fetching suggestions:",t),i()})}function n(n){t(n),e(n)}function i(){for(;u.firstChild;)u.removeChild(u.firstChild);for(u.style.display="none";g.firstChild;)g.removeChild(g.firstChild);g.style.display="none"}function o(t){t.target.classList.contains("key")&&(t.target.classList.contains("space-key")?s.value+=" ":t.target.classList.contains("delete-key")?s.value=s.value.slice(0,-1):s.value+=t.target.textContent,t.target.classList.add("clicked"),setTimeout(()=>{t.target.classList.remove("clicked")},500),s.focus(),s.dispatchEvent(new Event("input")))}updateSuggestionPosition(),window.addEventListener("resize",updateSuggestionPosition);const s=document.getElementById("textOutput"),c=document.getElementById("copyButton"),a=document.getElementById("notification"),d=document.getElementById("emojiButton"),l=document.getElementById("emojiDropdown"),r=document.getElementById("keyboard"),u=document.getElementById("local-suggestions"),g=document.getElementById("wikipedia-suggestions"),m=document.getElementById("clearButton");let h,p=-1,f=null;u.style.display="block",m.addEventListener("click",function(){s.value=""}),s.addEventListener("blur",function(){h=[s.selectionStart,s.selectionEnd]}),s.addEventListener("input",function(){const t=this.value;if(i(),!t)return!1;p=-1,clearTimeout(f),f=setTimeout(()=>{const e=t.split(" "),i=e[e.length-1];i.length>=3&&n(i)},300)}),r.addEventListener("click",function(t){o(t)}),r.addEventListener("touchstart",function(t){t.preventDefault(),o(t)}),d.addEventListener("click",function(t){d.contains(t.target)||l.contains(t.target)||!l.classList.contains("show")||l.classList.remove("show")}),c.addEventListener("click",function(){s.select(),document.execCommand("copy"),a.classList.add("show"),setTimeout(()=>{a.classList.remove("show")},2e3)}),d.addEventListener("click",function(){l.classList.toggle("show")}),l.addEventListener("click",function(t){t.target.classList.contains("emoji")&&(s.focus(),s.selectionStart=h[0],s.selectionEnd=h[1],s.setRangeText(t.target.textContent,s.selectionStart,s.selectionEnd,"end"))}),document.addEventListener("click",function(t){u.contains(t.target)||i()})});
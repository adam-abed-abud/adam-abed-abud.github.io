:root {
  --mosaic-rows: 8;
  --mosaic-cols: 12;
  --mosaic-duration: 700ms;
  --mosaic-gap: 2px;
  --mosaic-cover-color: #4a5df8;
  --mosaic-easing: cubic-bezier(.16,1,.3,1);
  --mosaic-cover-percentage: 0.7;
  --mosaic-enabled: 1; /* Set to 0 to disable */
}

/* Dark mode support */
[data-theme="dark"] {
  --mosaic-cover-color: #0b0d13;
}

[data-theme="light"] {
  --mosaic-cover-color: #4a5df8;
}

/* Alternative color schemes - uncomment one to use */

/* Blue theme */
/*
[data-theme="dark"] {
  --mosaic-cover-color: #1a1a2e;
}
[data-theme="light"] {
  --mosaic-cover-color: #e3f2fd;
}
*/

/* Purple theme */
/*
[data-theme="dark"] {
  --mosaic-cover-color: #2d1b69;
}
[data-theme="light"] {
  --mosaic-cover-color: #f3e5f5;
}
*/

/* Green theme */
/*
[data-theme="dark"] {
  --mosaic-cover-color: #1b4332;
}
[data-theme="light"] {
  --mosaic-cover-color: #e8f5e8;
}
*/

/* Red theme */
/*
[data-theme="dark"] {
  --mosaic-cover-color: #4a1c1c;
}
[data-theme="light"] {
  --mosaic-cover-color: #ffebee;
}
*/

.mosaic-transition {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  display: grid;
  grid-template-columns: repeat(var(--mosaic-cols), 1fr);
  grid-template-rows: repeat(var(--mosaic-rows), 1fr);
  gap: var(--mosaic-gap);
  opacity: 0;
  transition: opacity 0.1s ease-out;
}

.mosaic-tile {
  background: var(--mosaic-cover-color);
  transform: scale(0);
  opacity: 0;
  will-change: transform, opacity;
}

.mosaic-tile.active {
  opacity: 1;
}

.mosaic-transition.covering {
  opacity: 1;
}

.mosaic-transition.covering .mosaic-tile.active {
  transform: scale(1);
  transition: transform var(--mosaic-duration) var(--mosaic-easing), opacity 0s;
}

.mosaic-transition.revealing {
  opacity: 1;
}

.mosaic-transition.revealing .mosaic-tile.active {
  transform: scale(0);
  transition: transform var(--mosaic-duration) var(--mosaic-easing), opacity 0s;
}

/* Ensure overlay is hidden when not transitioning */
.mosaic-transition:not(.covering):not(.revealing) {
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Force cleanup for any stuck states */
.mosaic-transition.force-cleanup {
  opacity: 0 !important;
  pointer-events: none !important;
}

.mosaic-transition.force-cleanup .mosaic-tile {
  transform: scale(0) !important;
  opacity: 0 !important;
  transition: none !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  :root {
    --mosaic-rows: 6;
    --mosaic-cols: 8;
    --mosaic-duration: 600ms;
  }
}

@media (max-width: 480px) {
  :root {
    --mosaic-rows: 4;
    --mosaic-cols: 6;
    --mosaic-duration: 500ms;
  }
}

/* Accessibility: respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .mosaic-tile {
    transition: none !important;
  }
}

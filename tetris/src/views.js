var utils=require("./utils.js"),consts=require("./consts.js"),$=utils.$,scene=$("scene"),side=$("side"),info=$("info"),preview=$("preview"),level=$("level"),score=$("score"),rewardInfo=$("rewardInfo"),reward=$("reward"),gameOver=$("gameOver"),btnRestart=$("restart"),finalScore=$("finalScore"),SIDE_WIDTH=consts.SIDE_WIDTH,getContainerSize=function(e,t){var i=document.documentElement.clientWidth,n=document.documentElement.clientHeight,r={};return i>n?(r.height=Math.min(t,n),r.width=Math.min(r.height/2+SIDE_WIDTH,e)):(r.width=Math.min(e,i),r.height=Math.min(t,n)),r},layoutView=function(e,t,i){var n=getContainerSize(t,i),r=e.style;r.height=n.height+"px",r.width=n.width+"px",r.marginTop=-n.height/2+"px",r.marginLeft=-n.width/2+"px",scene.height=n.height,scene.width=scene.height/2;var s=n.width-scene.width;side.style.width=s+"px",s<SIDE_WIDTH&&(info.style.width=side.style.width),preview.width=80,preview.height=80,gameOver.style.width=scene.width+"px"},tetrisView={init:function(e,t,i){this.container=$(e),this.scene=scene,this.preview=preview,this.btnRestart=btnRestart,layoutView(this.container,t,i),this.scene.focus(),rewardInfo.addEventListener("animationEnd",function(){rewardInfo.className="invisible"})},setScore:function(e){score.innerHTML=e},setFinalScore:function(e){finalScore.innerHTML=e},setLevel:function(e){level.innerHTML=e},setReward:function(e){e>0?(reward.innerHTML=e,rewardInfo.className="fadeOutUp animated"):rewardInfo.className="invisible"},setGameOver:function(e){gameOver.style.display=e?"block":"none"}};module.exports=tetrisView;
function initParticles(){particlesJS("particles-js",{particles:{number:{value:50,density:{enable:!0,value_area:800}},color:{value:"#3a86ff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5}},opacity:{value:.3,random:!0,anim:{enable:!0,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!0,speed:2,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#3a86ff",opacity:.2,width:1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:.6}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}function initCardEffects(){document.querySelectorAll(".asset-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px)",this.style.boxShadow="0 15px 30px rgba(0, 0, 0, 0.1)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)",this.style.boxShadow="0 5px 15px rgba(0, 0, 0, 0.08)"})})}function initParallax(){window.addEventListener("mousemove",function(e){const t=e.clientX/window.innerWidth,n=e.clientY/window.innerHeight,s=document.querySelector("header"),o=document.querySelector(".dashboard");s&&o&&(s.style.backgroundPositionX=`${10*t}px`,s.style.backgroundPositionY=`${10*n}px`,o.style.transform=`translate(${5*t}px, ${5*n}px)`)})}function initRefreshButton(){const e=document.getElementById("refresh-button");e&&e.addEventListener("click",refreshCharts)}function refreshCharts(){const e=document.getElementById("refresh-button");e&&(e.classList.add("refreshing"),e.innerHTML='<i class="fas fa-sync-alt fa-spin"></i> Refreshing...',setTimeout(()=>{e.classList.remove("refreshing"),e.innerHTML='<i class="fas fa-sync-alt"></i> Refresh Charts'},2e3));const t=document.querySelectorAll(".widget-overlay");t.forEach(e=>{e.style.opacity="1"});const n=document.querySelectorAll(".asset-card");n.forEach(e=>{e.classList.add("refreshing")});const s=document.querySelector(".comparison-section");s&&s.classList.add("updating-widget"),setTimeout(()=>{t.forEach(e=>{e.style.opacity="0"}),n.forEach(e=>{e.classList.remove("refreshing")}),s&&s.classList.remove("updating-widget")},2e3)}function initNewsFeatures(){fetchFinancialNews()}function fetchFinancialNews(){const e=document.getElementById("news-list"),t=document.getElementById("expanded-news");e&&(e.innerHTML='<li class="loading">Loading financial news...</li>'),t&&(t.innerHTML='<div class="news-loading"><div class="loading-indicator"></div><p>Loading detailed financial news...</p></div>');const n=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent("https://finance.yahoo.com/news/rssindex")}`;fetch(n).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{if(!("ok"===e.status&&e.items&&e.items.length>0))throw new Error("No items found in feed or feed status not ok");displayNewsItems(e.items),displayExpandedNews(e.items),console.log("Successfully loaded news from Yahoo Finance")})["catch"](e=>{console.error("Error fetching Yahoo Finance news:",e),tryAlternativeFeed()})}function tryAlternativeFeed(){document.getElementById("news-list"),document.getElementById("expanded-news");const e=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent("https://www.cnbc.com/id/10000664/device/rss/rss.html")}`;fetch(e).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{if(!("ok"===e.status&&e.items&&e.items.length>0))throw new Error("No items found in CNBC feed");displayNewsItems(e.items),displayExpandedNews(e.items),console.log("Successfully loaded news from CNBC")})["catch"](e=>{console.error("Error fetching CNBC news:",e),trySecondAlternativeFeed()})}function trySecondAlternativeFeed(){const e=document.getElementById("news-list"),t=document.getElementById("expanded-news"),n=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent("https://feeds.a.dj.com/rss/RSSMarketsMain.xml")}`;fetch(n).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{if(!("ok"===e.status&&e.items&&e.items.length>0))throw new Error("No items found in MarketWatch feed");displayNewsItems(e.items),displayExpandedNews(e.items),console.log("Successfully loaded news from MarketWatch")})["catch"](n=>{console.error("Error fetching all news sources:",n),e&&(e.innerHTML="<li>Unable to load financial news. Please check your connection and try again later.</li>"),t&&(t.innerHTML='\n                    <div class="news-error">\n                        <i class="fas fa-exclamation-circle" style="font-size: 2rem; color: var(--accent-color); margin-bottom: 1rem;"></i>\n                        <h3>Unable to load financial news</h3>\n                        <p>We couldn\'t retrieve the latest financial news at this time. Please check your internet connection and try again later.</p>\n                        <button onclick="initNewsFeatures()" class="refresh-btn" style="margin-top: 1rem;">\n                            <i class="fas fa-sync-alt"></i> Retry\n                        </button>\n                    </div>\n                ')})}function displayNewsItems(e){const t=document.getElementById("news-list");if(!t)return;t.innerHTML="";const n=e.slice(0,8),s=document.createDocumentFragment();n.forEach(e=>{const t=document.createElement("li"),n=document.createElement("a"),o=document.createElement("div");o.innerHTML=e.title;const i=o.textContent.trim();n.href=e.link,n.target="_blank",n.textContent=i,n.title=i,t.appendChild(n),s.appendChild(t)}),Array.from(s.children).forEach(e=>{const t=e.cloneNode(!0);s.appendChild(t)}),t.appendChild(s);const o=5*(2*n.length);t.style.animationDuration=`${o}s`,t.addEventListener("mouseenter",()=>{t.style.animationPlayState="paused"}),t.addEventListener("mouseleave",()=>{t.style.animationPlayState="running"})}function displayExpandedNews(e){const t=document.getElementById("expanded-news");if(!t)return;t.innerHTML="";const n=e.slice(0,6),s=document.createDocumentFragment(),o=e=>{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},i=e=>{const t=document.createElement("div");t.innerHTML=e;const n=t.querySelector("p");return n?n.textContent.trim().substring(0,150)+"...":t.textContent.trim().substring(0,150)+"..."};n.forEach(e=>{const t=document.createElement("div");t.className="news-card";let n="";if(e.enclosure&&e.enclosure.link?n=e.enclosure.link:e.thumbnail&&(n=e.thumbnail),!n&&e.content){const t=document.createElement("div");t.innerHTML=e.content;const s=t.querySelector("img");s&&s.src&&(n=s.src)}if(!n&&e.description){const t=document.createElement("div");t.innerHTML=e.description;const s=t.querySelector("img");s&&s.src&&(n=s.src)}n||(n="https://via.placeholder.com/350x180?text=Financial+News");let r="";r=e.content&&e.content.trim()?i(e.content):e.description&&e.description.trim()?e.description.length>150?e.description.substring(0,150)+"...":e.description:"No description available for this article.";const a=o(e.pubDate);t.innerHTML=`\n            <div class="news-img-container">\n                <img src="${n}" alt="${e.title}" class="news-img" onerror="this.src='https://via.placeholder.com/350x180?text=Financial+News'">\n            </div>\n            <div class="news-content">\n                <div class="news-date">${a}</div>\n                <h3 class="news-title">${e.title}</h3>\n                <p class="news-excerpt">${r}</p>\n                <a href="${e.link}" target="_blank" class="news-read-more">Read Full Article <i class="fas fa-arrow-right"></i></a>\n            </div>\n        `,s.appendChild(t)}),t.appendChild(s)}document.addEventListener("DOMContentLoaded",function(){initParticles(),initCardEffects(),initParallax(),initRefreshButton(),initNewsFeatures()}),window.addEventListener("load",function(){document.body.classList.add("loaded"),[document.querySelector("header"),...document.querySelectorAll(".asset-card"),document.querySelector(".comparison-section")].forEach((e,t)=>{e&&setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100*t)})});
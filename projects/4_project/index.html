<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <script defer src="https://cloud.umami.is/script.js" data-website-id="5e7bb7ae-7a59-4e21-bbe6-bd5a0afbaa3d"></script> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Volume Trading Analysis for NVIDIA stock | Adam Abed Abud </title> <meta name="author" content="Adam Abed Abud"> <meta name="description" content="Analyzing stock trading volumes and price movements using Python"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://adam-abed-abud.github.io/projects/4_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Adam</span> Abed Abud </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/bio/">Bio </a> </li> <li class="nav-item "> <a class="nav-link" href="/man/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/personal-profile/">Personal Profile </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Menu </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/pointers/">Pointers</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/links/">Resources</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/weather/">Weather</a> </div> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Volume Trading Analysis for NVIDIA stock</h1> <p class="post-description">Analyzing stock trading volumes and price movements using Python</p> </header> <article> <p>This project implements a simple analysis of stock trading volumes and price movements using Python. The analysis focuses on identifying significant volume spikes that could indicate important market events or trading patterns. This post is inspired from <a href="https://ayratmurtazin.beehiiv.com/" rel="external nofollow noopener" target="_blank">GuruFinance Insighs</a></p> <h2 id="key-features">Key Features</h2> <ul> <li>Historical stock data retrieval using yfinance</li> <li>Volume analysis with moving averages</li> <li>Dynamic threshold detection for unusual trading volumes</li> <li>Interactive visualizations of price movements and volume patterns</li> </ul> <h2 id="implementation-details">Implementation Details</h2> <p>The implementation uses several Python libraries including pandas for data manipulation, yfinance for stock data retrieval, and matplotlib for visualization. Here’s how it works:</p> <ol> <li>Some code details</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">yfinance</span> <span class="k">as</span> <span class="n">yf</span>

<span class="c1"># Update font sizes globally
</span><span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span>
    <span class="sh">'</span><span class="s">font.size</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>          <span class="c1"># Base font size
</span>    <span class="sh">'</span><span class="s">axes.titlesize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>     <span class="c1"># Title font size
</span>    <span class="sh">'</span><span class="s">axes.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>     <span class="c1"># Axis label font size
</span>    <span class="sh">'</span><span class="s">xtick.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>    <span class="c1"># X-axis tick label font size
</span>    <span class="sh">'</span><span class="s">ytick.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>    <span class="c1"># Y-axis tick label font size
</span>    <span class="sh">'</span><span class="s">legend.fontsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span>     <span class="c1"># Legend font size
</span><span class="p">})</span>

<span class="n">percentile_level</span> <span class="o">=</span> <span class="mf">0.97</span>
</code></pre></div></div> <ol> <li>First, we retrieve historical stock data</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stock_symbol</span> <span class="o">=</span> <span class="sh">"</span><span class="s">NVDA</span><span class="sh">"</span>
<span class="n">stock_data</span> <span class="o">=</span> <span class="n">yf</span><span class="p">.</span><span class="nf">download</span><span class="p">(</span><span class="n">stock_symbol</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="sh">'</span><span class="s">2020-01-01</span><span class="sh">'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">'</span><span class="s">2025-01-17</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <ol> <li>We calculate moving averages for both price and volume:</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Short_Term_MA</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">50</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>
<span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Long_Term_MA</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">200</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>
<span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Avg_Volume_20</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">20</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>
</code></pre></div></div> <ol> <li>A volume index is created to identify unusual trading activity:</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Avg_Volume_20</span><span class="sh">'</span><span class="p">]</span>
</code></pre></div></div> <ol> <li>Dynamic threshold</li> </ol> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dynamic_threshold</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">].</span><span class="nf">quantile</span><span class="p">(</span><span class="n">percentile_level</span><span class="p">)</span>
<span class="n">highlight_mask</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">dynamic_threshold</span>
</code></pre></div></div> <h3 id="price-evolution-and-volume-analysis">Price Evolution and Volume Analysis</h3> <p>The primary chart combines price movement with volume analysis, creating a comprehensive view of market activity. The blue line traces the stock’s price journey, while the underlying gray bars represent daily trading volumes. Red dots mark days where trading volume significantly exceeds normal levels (above the 97th percentile), potentially signaling major market events, institutional trading, or significant news impacts. The purple line showing the 20-day average volume provides context for what constitutes “normal” trading activity. This combination of indicators helps identify whether price movements are supported by strong trading volume, which can validate the significance of price trends.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/nvda_price-480.webp 480w,/assets/img/projects/nvda_price-800.webp 800w,/assets/img/projects/nvda_price-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/nvda_price.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Price and Volume Analysis" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Price movement chart with volume overlay. Red dots indicate days with unusually high trading volume. </div> <p>The visualization combines price movements with volume analysis, highlighting days where trading volume exceeds the 97th percentile of the volume index. This helps identify potentially significant market events or unusual trading activity.</p> <h3 id="volume-ratio-dynamics">Volume Ratio Dynamics</h3> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/nvda_volume_ratio-480.webp 480w,/assets/img/projects/nvda_volume_ratio-800.webp 800w,/assets/img/projects/nvda_volume_ratio-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/nvda_volume_ratio.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Volume ratio over time" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Volume ratio as a function of time. </div> <p>The volume ratio plot offers a normalized view of trading activity, making it easier to identify unusual volume patterns regardless of the absolute price level. The green line represents the ratio between daily volume and its 20-day moving average, effectively highlighting periods of exceptional trading activity. When the ratio exceeds the red dashed threshold line (set at the 97th percentile), it signals potentially significant market events. This visualization is particularly valuable for identifying periods of institutional activity or major market sentiment shifts, as abnormal volume often precedes or coincides with significant price movements.</p> <h3 id="statistical-distribution-of-volume">Statistical Distribution of Volume</h3> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/nvda_volume_hist-480.webp 480w,/assets/img/projects/nvda_volume_hist-800.webp 800w,/assets/img/projects/nvda_volume_hist-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/nvda_volume_hist.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Distribution of volume ratio" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Histogram of the volume raio distribution </div> <p>The histogram provides a statistical perspective on trading volumes, showing how frequently different volume ratios occur. The bell-shaped distribution typically indicates that most trading days experience normal volume levels, clustering around the ratio of 1.0. Days that fall beyond the red dashed threshold line are statistically significant outliers, representing less than 3% of trading days. These outlier days often coincide with major market events, earnings announcements, or significant news that could impact the stock’s future trajectory. Understanding this distribution helps analysts calibrate their expectations for what constitutes truly unusual trading activity.</p> <p>The analysis uses several sophisticated techniques:</p> <ul> <li> <strong>Dynamic Thresholding</strong>: Instead of using fixed thresholds, the system calculates a dynamic threshold based on the 97th percentile of volume ratios.</li> <li> <strong>Statistical Analysis</strong>: Volume patterns are analyzed using rolling averages and ratio calculations.</li> </ul> <p>Here is the full python code:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">yfinance</span> <span class="k">as</span> <span class="n">yf</span>

<span class="c1"># Update font sizes globally
</span><span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span>
    <span class="sh">'</span><span class="s">font.size</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>          <span class="c1"># Base font size
</span>    <span class="sh">'</span><span class="s">axes.titlesize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>     <span class="c1"># Title font size
</span>    <span class="sh">'</span><span class="s">axes.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>     <span class="c1"># Axis label font size
</span>    <span class="sh">'</span><span class="s">xtick.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>    <span class="c1"># X-axis tick label font size
</span>    <span class="sh">'</span><span class="s">ytick.labelsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>    <span class="c1"># Y-axis tick label font size
</span>    <span class="sh">'</span><span class="s">legend.fontsize</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span>     <span class="c1"># Legend font size
</span><span class="p">})</span>

<span class="c1"># Set parameters
</span><span class="n">stock_symbol</span> <span class="o">=</span> <span class="sh">"</span><span class="s">NVDA</span><span class="sh">"</span>
<span class="n">percentile_level</span> <span class="o">=</span> <span class="mf">0.97</span>

<span class="c1"># Retrieve data 
</span><span class="n">stock_data</span> <span class="o">=</span> <span class="n">yf</span><span class="p">.</span><span class="nf">download</span><span class="p">(</span><span class="n">stock_symbol</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="sh">'</span><span class="s">2020-01-01</span><span class="sh">'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">'</span><span class="s">2025-01-17</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Calculate moving averages
</span><span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Short_Term_MA</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">50</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>
<span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Long_Term_MA</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">200</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>
<span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Avg_Volume_20</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">].</span><span class="nf">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">20</span><span class="p">).</span><span class="nf">mean</span><span class="p">()</span>

<span class="c1"># Calculate volume index
</span><span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Avg_Volume_20</span><span class="sh">'</span><span class="p">]</span>

<span class="c1"># Calculate dynamic threshold and create mask for high volume days
</span><span class="n">dynamic_threshold</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">].</span><span class="nf">quantile</span><span class="p">(</span><span class="n">percentile_level</span><span class="p">)</span>
<span class="n">highlight_mask</span> <span class="o">=</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">dynamic_threshold</span>

<span class="c1"># Create Figure 1: Price and Volume Plot
</span><span class="n">fig</span><span class="p">,</span> <span class="n">price_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>

<span class="c1"># Plot closing price
</span><span class="n">price_ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">stock_data</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Closing Price</span><span class="sh">'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">blue</span><span class="sh">'</span><span class="p">)</span>
<span class="n">price_ax</span><span class="p">.</span><span class="nf">scatter</span><span class="p">(</span><span class="n">stock_data</span><span class="p">.</span><span class="n">index</span><span class="p">[</span><span class="n">highlight_mask</span><span class="p">],</span> 
                <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">][</span><span class="n">highlight_mask</span><span class="p">],</span> 
                <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span> 
                <span class="n">s</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> 
                <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">High Volume Days</span><span class="sh">'</span><span class="p">)</span>
<span class="n">price_ax</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">stock_symbol</span><span class="si">}</span><span class="s"> Price Movement (2020–2023)</span><span class="sh">'</span><span class="p">)</span>
<span class="n">price_ax</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Price</span><span class="sh">'</span><span class="p">)</span>
<span class="n">price_ax</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="sh">'</span><span class="s">upper left</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Add secondary axis for volume
</span><span class="n">volume_ax2</span> <span class="o">=</span> <span class="n">price_ax</span><span class="p">.</span><span class="nf">twinx</span><span class="p">()</span>
<span class="n">volume_ax2</span><span class="p">.</span><span class="nf">bar</span><span class="p">(</span><span class="n">stock_data</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">gray</span><span class="sh">'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax2</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">stock_data</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Avg_Volume_20</span><span class="sh">'</span><span class="p">],</span> 
                <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">purple</span><span class="sh">'</span><span class="p">,</span> 
                <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">20-Day Avg Volume</span><span class="sh">'</span><span class="p">,</span> 
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">volume_ax2</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax2</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="sh">'</span><span class="s">lower left</span><span class="sh">'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># Create Figure 2: Volume Ratio Plot
</span><span class="n">fig</span><span class="p">,</span> <span class="n">volume_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>

<span class="c1"># Plot volume ratio
</span><span class="n">volume_ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">stock_data</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">],</span> 
               <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Volume to MA Ratio</span><span class="sh">'</span><span class="p">,</span> 
               <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">green</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax</span><span class="p">.</span><span class="nf">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">dynamic_threshold</span><span class="p">,</span> 
                  <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span> 
                  <span class="n">linestyle</span><span class="o">=</span><span class="sh">'</span><span class="s">--</span><span class="sh">'</span><span class="p">,</span> 
                  <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">percentile_level</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s">% Threshold</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">stock_symbol</span><span class="si">}</span><span class="s"> Volume Ratio Over Time</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Volume Ratio</span><span class="sh">'</span><span class="p">)</span>
<span class="n">volume_ax</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="sh">'</span><span class="s">upper left</span><span class="sh">'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># Create Figure 3: Volume Distribution Histogram
</span><span class="n">fig</span><span class="p">,</span> <span class="n">hist_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>

<span class="c1"># Plot histogram
</span><span class="n">hist_ax</span><span class="p">.</span><span class="nf">hist</span><span class="p">(</span><span class="n">stock_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Volume_Index</span><span class="sh">'</span><span class="p">],</span> 
             <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> 
             <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">green</span><span class="sh">'</span><span class="p">,</span> 
             <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> 
             <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Distribution of Volume Ratios</span><span class="sh">'</span><span class="p">)</span>
<span class="n">hist_ax</span><span class="p">.</span><span class="nf">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dynamic_threshold</span><span class="p">,</span> 
                <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span> 
                <span class="n">linestyle</span><span class="o">=</span><span class="sh">'</span><span class="s">--</span><span class="sh">'</span><span class="p">,</span> 
                <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">percentile_level</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s">% Threshold</span><span class="sh">'</span><span class="p">)</span>
<span class="n">hist_ax</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">stock_symbol</span><span class="si">}</span><span class="s"> Volume Ratio Histogram</span><span class="sh">'</span><span class="p">)</span>
<span class="n">hist_ax</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Volume Ratio</span><span class="sh">'</span><span class="p">)</span>
<span class="n">hist_ax</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Frequency</span><span class="sh">'</span><span class="p">)</span>
<span class="n">hist_ax</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="sh">'</span><span class="s">upper left</span><span class="sh">'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

</code></pre></div></div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> <a href="https://www.checkdomain.net/en/company/warranties/ssl/popup/" onclick="window.open(this.href + '?host=' + window.location.host,'','height=600,width=560,scrollbars=yes'); return false;" rel="external nofollow noopener" target="_blank"> <img src="https://www.checkdomain.net/assets/bundles/web/app/widget/seal/img/ssl_certificate/150x150.png" alt="SSL" style="width: 20px; height: 20px; margin-right: 10px;"> </a> © Copyright 2025 Adam Abed Abud. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Made with ❤️ </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>
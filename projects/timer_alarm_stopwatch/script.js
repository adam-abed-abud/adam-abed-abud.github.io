function formatStopwatchTime(t){const e=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3),s=Math.floor(t%1e3/10);stopwatchHours.textContent=e.toString().padStart(2,"0"),stopwatchMinutes.textContent=a.toString().padStart(2,"0"),stopwatchSeconds.textContent=n.toString().padStart(2,"0"),stopwatchMilliseconds.textContent=s.toString().padStart(2,"0")}function formatTimerDisplay(t){const e=Math.floor(t/3600),a=Math.floor(t%3600/60),n=t%60;timerDisplayHours.textContent=e.toString().padStart(2,"0"),timerDisplayMinutes.textContent=a.toString().padStart(2,"0"),timerDisplaySeconds.textContent=n.toString().padStart(2,"0")}function updateTimerProgress(){const t=(timerTotalSeconds-timerRemainingSeconds)/timerTotalSeconds*100;timerProgress.style.width=`${t}%`}function formatTimeForDisplay(t,e){const a=t>=12?"PM":"AM";return`${t%12||12}:${e.toString().padStart(2,"0")} ${a}`}function renderAlarms(){if(alarmsList.innerHTML="",0===alarms.length){const t=document.createElement("li");return t.textContent="No alarms set",t.style.textAlign="center",t.style.padding="10px",t.style.color="#636e72",void alarmsList.appendChild(t)}alarms.forEach(t=>{const e=document.createElement("li");e.classList.add("alarm-item");const a=document.createElement("div"),n=document.createElement("div");n.classList.add("alarm-time"),n.textContent=formatTimeForDisplay(t.hours,t.minutes);const s=document.createElement("div");s.classList.add("alarm-name"),s.textContent=t.name,a.appendChild(n),a.appendChild(s);const r=document.createElement("button");r.classList.add("delete-alarm"),r.innerHTML='<i class="fas fa-trash"></i>',r.addEventListener("click",()=>{alarms=alarms.filter(e=>e.id!==t.id),renderAlarms()}),e.appendChild(a),e.appendChild(r),alarmsList.appendChild(e)})}function checkAlarms(){const t=new Date,e=t.getHours(),a=t.getMinutes();0===t.getSeconds()&&alarms.forEach(t=>{t.active&&t.hours===e&&t.minutes===a&&(alarmSound.play(),activeAlarm=t,alarmModal.classList.add("show"),alarmMessage.textContent=`${t.name}`,t.active=!1)})}function updateCurrentTime(){const t=new Date,e=t.getHours(),a=t.getMinutes(),n=t.getSeconds(),s=`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`;currentTimeDisplay.textContent=s;const r={weekday:"long",year:"numeric",month:"long",day:"numeric"},i=t.toLocaleDateString("en-US",r);currentDateDisplay.textContent=i;const m=Intl.DateTimeFormat().resolvedOptions().timeZone;currentTimeZoneDisplay&&(currentTimeZoneDisplay.textContent=m),checkAlarms()}function init(){formatStopwatchTime(0),formatTimerDisplay(0),updateCurrentTime(),setInterval(updateCurrentTime,1e3),renderAlarms(),document.querySelectorAll('input[type="number"]').forEach(t=>{t.addEventListener("input",()=>{const e=parseInt(t.getAttribute("min")),a=parseInt(t.getAttribute("max"));let n=parseInt(t.value)||0;n<e&&(n=e),n>a&&(n=a),t.value=n})})}const tabBtns=document.querySelectorAll(".tab-btn"),tabPanes=document.querySelectorAll(".tab-pane"),stopwatchHours=document.getElementById("stopwatch-hours"),stopwatchMinutes=document.getElementById("stopwatch-minutes"),stopwatchSeconds=document.getElementById("stopwatch-seconds"),stopwatchMilliseconds=document.getElementById("stopwatch-milliseconds"),stopwatchStartBtn=document.getElementById("stopwatch-start"),stopwatchPauseBtn=document.getElementById("stopwatch-pause"),stopwatchResetBtn=document.getElementById("stopwatch-reset"),stopwatchLapBtn=document.getElementById("stopwatch-lap"),lapsList=document.getElementById("laps-list"),timerHoursInput=document.getElementById("timer-hours"),timerMinutesInput=document.getElementById("timer-minutes"),timerSecondsInput=document.getElementById("timer-seconds"),timerDisplayHours=document.getElementById("timer-display-hours"),timerDisplayMinutes=document.getElementById("timer-display-minutes"),timerDisplaySeconds=document.getElementById("timer-display-seconds"),timerStartBtn=document.getElementById("timer-start"),timerPauseBtn=document.getElementById("timer-pause"),timerResetBtn=document.getElementById("timer-reset"),timerProgress=document.getElementById("timer-progress"),alarmHoursInput=document.getElementById("alarm-hours"),alarmMinutesInput=document.getElementById("alarm-minutes"),alarmNameInput=document.getElementById("alarm-name"),alarmSetBtn=document.getElementById("alarm-set"),alarmsList=document.getElementById("alarms-list"),alarmModal=document.getElementById("alarm-modal"),alarmMessage=document.getElementById("alarm-message"),stopAlarmBtn=document.getElementById("stop-alarm"),currentTimeDisplay=document.getElementById("current-time"),currentDateDisplay=document.getElementById("current-date"),currentTimeZoneDisplay=document.getElementById("current-timezone"),alarmSound=new Audio("https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3");let stopwatchInterval;alarmSound.loop=!0,tabBtns.forEach(t=>{t.addEventListener("click",()=>{tabBtns.forEach(t=>t.classList.remove("active")),tabPanes.forEach(t=>t.classList.remove("active")),t.classList.add("active");const e=t.getAttribute("data-tab");document.getElementById(e).classList.add("active")})});let timerInterval,stopwatchRunning=!1,stopwatchTime=0,lapCount=0;stopwatchStartBtn.addEventListener("click",()=>{if(!stopwatchRunning){const t=Date.now()-stopwatchTime;stopwatchInterval=setInterval(()=>{formatStopwatchTime(stopwatchTime=Date.now()-t)},10),stopwatchRunning=!0,stopwatchStartBtn.disabled=!0,stopwatchPauseBtn.disabled=!1,stopwatchResetBtn.disabled=!1,stopwatchLapBtn.disabled=!1}}),stopwatchPauseBtn.addEventListener("click",()=>{clearInterval(stopwatchInterval),stopwatchRunning=!1,stopwatchStartBtn.disabled=!1,stopwatchPauseBtn.disabled=!0}),stopwatchResetBtn.addEventListener("click",()=>{clearInterval(stopwatchInterval),stopwatchRunning=!1,formatStopwatchTime(stopwatchTime=0),stopwatchStartBtn.disabled=!1,stopwatchPauseBtn.disabled=!0,stopwatchResetBtn.disabled=!0,stopwatchLapBtn.disabled=!0,lapsList.innerHTML="",lapCount=0}),stopwatchLapBtn.addEventListener("click",()=>{if(stopwatchRunning){lapCount++;const t=document.createElement("li");t.classList.add("lap-item");const e=document.createElement("span");e.textContent=`Lap ${lapCount}`;const a=document.createElement("span");a.textContent=`${stopwatchHours.textContent}:${stopwatchMinutes.textContent}:${stopwatchSeconds.textContent}.${stopwatchMilliseconds.textContent}`,t.appendChild(e),t.appendChild(a),lapsList.prepend(t)}});let timerEndTime,timerRunning=!1,timerPaused=!1,timerTotalSeconds=0,timerRemainingSeconds=0;timerStartBtn.addEventListener("click",()=>{if(!timerRunning){if(!timerPaused){const t=parseInt(timerHoursInput.value)||0,e=parseInt(timerMinutesInput.value)||0,a=parseInt(timerSecondsInput.value)||0;if(timerRemainingSeconds=timerTotalSeconds=3600*t+60*e+a,timerTotalSeconds<=0)return void alert("Please set a time greater than zero.")}timerEndTime=Date.now()+1e3*timerRemainingSeconds,timerInterval=setInterval(()=>{const t=Date.now();formatTimerDisplay(timerRemainingSeconds=Math.max(0,Math.ceil((timerEndTime-t)/1e3))),updateTimerProgress(),timerRemainingSeconds<=0&&(clearInterval(timerInterval),timerRunning=!1,timerPaused=!1,timerStartBtn.disabled=!1,timerPauseBtn.disabled=!0,timerResetBtn.disabled=!1,alarmSound.play(),alarmModal.classList.add("show"),alarmMessage.textContent="Timer Complete!")},100),timerRunning=!0,timerStartBtn.disabled=!0,timerPauseBtn.disabled=!1,timerResetBtn.disabled=!1}}),timerPauseBtn.addEventListener("click",()=>{clearInterval(timerInterval),timerRunning=!1,timerPaused=!0,timerStartBtn.disabled=!1,timerPauseBtn.disabled=!0}),timerResetBtn.addEventListener("click",()=>{clearInterval(timerInterval),timerRunning=!1,timerPaused=!1,timerRemainingSeconds=0,formatTimerDisplay(0),timerProgress.style.width="0%",timerStartBtn.disabled=!1,timerPauseBtn.disabled=!0,timerResetBtn.disabled=!0,timerHoursInput.value=0,timerMinutesInput.value=0,timerSecondsInput.value=0});let alarms=[],activeAlarm=null;alarmSetBtn.addEventListener("click",()=>{const t=parseInt(alarmHoursInput.value)||0,e=parseInt(alarmMinutesInput.value)||0,a=alarmNameInput.value.trim()||"Alarm";if(t<0||t>23||e<0||e>59)return void alert("Please enter valid time values.");const n={id:Date.now(),hours:t,minutes:e,name:a,active:!0};alarms.push(n),renderAlarms(),alarmHoursInput.value=0,alarmMinutesInput.value=0,alarmNameInput.value=""}),stopAlarmBtn.addEventListener("click",()=>{alarmSound.pause(),alarmSound.currentTime=0,alarmModal.classList.remove("show"),activeAlarm&&(alarms=alarms.filter(t=>t.id!==activeAlarm.id),activeAlarm=null,renderAlarms())}),document.addEventListener("DOMContentLoaded",init);
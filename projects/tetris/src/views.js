var utils=require("./utils.js"),consts=require("./consts.js"),$=utils.$,scene=$("scene"),side=$("side"),info=$("info"),preview=$("preview"),level=$("level"),score=$("score"),rewardInfo=$("rewardInfo"),reward=$("reward"),gameOver=$("gameOver"),btnRestart=$("restart"),finalScore=$("finalScore"),pauseIndicator=document.createElement("div");pauseIndicator.id="pauseIndicator",pauseIndicator.className="invisible",pauseIndicator.innerHTML="<h2>PAUSED</h2><p>Press P to resume</p>",pauseIndicator.style.position="absolute",pauseIndicator.style.top="0",pauseIndicator.style.left="0",pauseIndicator.style.width="100%",pauseIndicator.style.height="100%",pauseIndicator.style.background="rgba(0, 0, 0, 0.7)",pauseIndicator.style.color="#fff",pauseIndicator.style.display="flex",pauseIndicator.style.flexDirection="column",pauseIndicator.style.justifyContent="center",pauseIndicator.style.alignItems="center",pauseIndicator.style.zIndex="99",pauseIndicator.style.borderRadius="5px";var SIDE_WIDTH=consts.SIDE_WIDTH,getContainerSize=function(e,t){var i=document.documentElement.clientWidth,n=document.documentElement.clientHeight,s={};return i>n?(s.height=Math.min(t,n),s.width=Math.min(s.height/2+SIDE_WIDTH,e)):(s.width=Math.min(e,i),s.height=Math.min(t,n)),s},layoutView=function(e,t,i){var n=getContainerSize(t,i),s=e.style;s.height=n.height+"px",s.width=n.width+"px",s.marginTop=-n.height/2+"px",s.marginLeft=-n.width/2+"px",scene.height=n.height,scene.width=scene.height/2;var a=n.width-scene.width;side.style.width=a+"px",a<SIDE_WIDTH&&(info.style.width=side.style.width),preview.width=80,preview.height=80,gameOver.style.width=scene.width+"px"},tetrisView={init:function(e,t,i){this.container=$(e),this.scene=scene,this.preview=preview,this.btnRestart=btnRestart,scene.parentNode.appendChild(pauseIndicator),this.pauseIndicator=pauseIndicator,layoutView(this.container,t,i),this.scene.focus(),rewardInfo.addEventListener("animationEnd",function(){rewardInfo.className="invisible"})},setScore:function(e){score.innerHTML=e},setFinalScore:function(e){finalScore.innerHTML=e},setLevel:function(e){level.innerHTML=e},setReward:function(e){e>0?(reward.innerHTML=e,rewardInfo.className="fadeOutUp animated"):rewardInfo.className="invisible"},setGameOver:function(e){gameOver.style.display=e?"block":"none"},setPause:function(e){pauseIndicator.style.display=e?"flex":"none"}};module.exports=tetrisView;